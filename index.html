<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Lightweight Data Structure for Recoding Categorical Data without Factors • rcoder</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Lightweight Data Structure for Recoding Categorical Data without Factors">
<meta property="og:description" content="A data structure and toolkit for documenting and recoding
    categorical data that can be shared in other statistical software.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">rcoder</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.2.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div class="section level1">
<div class="page-header"><h1 id="rcoder">rcoder<a class="anchor" aria-label="anchor" href="#rcoder"></a>
</h1></div>
<blockquote><p>rcoder outlines a lightweight data structure that captures categorical codings and easily converts them to other implementations.</p></blockquote>
<!-- badges: start -->
<div class="section level2">
<h2 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h2>
<p>rcoder’s main functions are <code><a href="reference/coding.html">coding()</a></code> and <code><a href="reference/code.html">code()</a></code>. <code><a href="reference/code.html">code()</a></code> maps a character-valued key to some value to represent a categorical level.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">rcoder</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://magrittr.tidyverse.org" class="external-link">magrittr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="reference/code.html">code</a></span><span class="op">(</span><span class="st">"Yes"</span>, <span class="fl">1</span><span class="op">)</span></span>
<span><span class="co">#&gt; &lt;Code&gt;</span></span>
<span><span class="co">#&gt; label: 'Yes'</span></span>
<span><span class="co">#&gt; value: 1</span></span></code></pre></div>
<p><code><a href="reference/code.html">code()</a></code> objects can hold an arbitrary amount of metadata. Useful pieces of information to know are descriptions of what levels represent (in case the label doesn’t have enough information) and whether or not the value represents a missing value.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/code.html">code</a></span><span class="op">(</span><span class="st">"No response"</span>, <span class="op">-</span><span class="fl">99</span>, description <span class="op">=</span> <span class="st">"Surveyed individual ignored question when asked"</span>, missing <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; &lt;Code&gt;</span></span>
<span><span class="co">#&gt; label: 'No response'</span></span>
<span><span class="co">#&gt; value: -99</span></span>
<span><span class="co">#&gt; description: 'Surveyed individual ignored question when asked'</span></span>
<span><span class="co">#&gt; Represents a missing value</span></span></code></pre></div>
<p><code><a href="reference/coding.html">coding()</a></code> is a collection of <code><a href="reference/code.html">code()</a></code> objects that represents the full set of values for a categorical variable.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/coding.html">coding</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="reference/code.html">code</a></span><span class="op">(</span><span class="st">"Don't know"</span>, <span class="fl">0</span>, missing <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="reference/code.html">code</a></span><span class="op">(</span><span class="st">"Never"</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="reference/code.html">code</a></span><span class="op">(</span><span class="st">"Rarely"</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="reference/code.html">code</a></span><span class="op">(</span><span class="st">"Sometimes"</span>, <span class="fl">3</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="reference/code.html">code</a></span><span class="op">(</span><span class="st">"Frequently"</span>, <span class="fl">4</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="reference/code.html">code</a></span><span class="op">(</span><span class="st">"Always"</span>, <span class="fl">5</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="reference/code.html">code</a></span><span class="op">(</span><span class="st">"No response"</span>, <span class="op">-</span><span class="fl">99</span>, missing <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="reference/code.html">code</a></span><span class="op">(</span><span class="st">"Refused"</span>, <span class="op">-</span><span class="fl">88</span>, missing <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="reference/code.html">code</a></span><span class="op">(</span><span class="st">"Absent"</span>, <span class="op">-</span><span class="fl">77</span>, missing <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; &lt;Coding&gt;</span></span>
<span><span class="co">#&gt; # A tibble: 9 x 5</span></span>
<span><span class="co">#&gt;   link        label       value description missing</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;       &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;       &lt;lgl&gt;  </span></span>
<span><span class="co">#&gt; 1 Don't know  Don't know      0 Don't know  TRUE   </span></span>
<span><span class="co">#&gt; 2 Never       Never           1 Never       FALSE  </span></span>
<span><span class="co">#&gt; 3 Rarely      Rarely          2 Rarely      FALSE  </span></span>
<span><span class="co">#&gt; 4 Sometimes   Sometimes       3 Sometimes   FALSE  </span></span>
<span><span class="co">#&gt; 5 Frequently  Frequently      4 Frequently  FALSE  </span></span>
<span><span class="co">#&gt; 6 Always      Always          5 Always      FALSE  </span></span>
<span><span class="co">#&gt; 7 No response No response   -99 No response TRUE   </span></span>
<span><span class="co">#&gt; 8 Refused     Refused       -88 Refused     TRUE   </span></span>
<span><span class="co">#&gt; 9 Absent      Absent        -77 Absent      TRUE</span></span></code></pre></div>
<p><code><a href="reference/coding.html">coding()</a></code> objects are designed to be an intermediate representation of categorical data so that they can be converted into different representations on the fly, e.g. ODK XLSForm choices and STATA/SPSS columns via <a href="https://haven.tidyverse.org/" class="external-link"><code>haven</code></a>.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/coding.html">coding</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="reference/code.html">code</a></span><span class="op">(</span><span class="st">"Never"</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="reference/code.html">code</a></span><span class="op">(</span><span class="st">"Rarely"</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="reference/code.html">code</a></span><span class="op">(</span><span class="st">"Sometimes"</span>, <span class="fl">3</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="reference/code.html">code</a></span><span class="op">(</span><span class="st">"Frequently"</span>, <span class="fl">4</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="reference/code.html">code</a></span><span class="op">(</span><span class="st">"Always"</span>, <span class="fl">5</span><span class="op">)</span>,</span>
<span>  .label <span class="op">=</span> <span class="st">"frequency"</span></span>
<span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="reference/coding_to_odk.html">coding_to_odk</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 5 x 3</span></span>
<span><span class="co">#&gt;   list_name  name label     </span></span>
<span><span class="co">#&gt;   &lt;chr&gt;     &lt;dbl&gt; &lt;chr&gt;     </span></span>
<span><span class="co">#&gt; 1 frequency     1 Never     </span></span>
<span><span class="co">#&gt; 2 frequency     2 Rarely    </span></span>
<span><span class="co">#&gt; 3 frequency     3 Sometimes </span></span>
<span><span class="co">#&gt; 4 frequency     4 Frequently</span></span>
<span><span class="co">#&gt; 5 frequency     5 Always</span></span></code></pre></div>
<p>To facilitate recoding, <code><a href="reference/coding.html">coding()</a></code> objects link to one another through the <code><a href="reference/code.html">code()</a></code> labels. If multiple values are collapsed into one, use the <code>links_from</code> parameter to identify which values are combined into one.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">original_coding</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/coding.html">coding</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="reference/code.html">code</a></span><span class="op">(</span><span class="st">"No"</span>, <span class="fl">0L</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="reference/code.html">code</a></span><span class="op">(</span><span class="st">"Yes"</span>, <span class="fl">1L</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="reference/code.html">code</a></span><span class="op">(</span><span class="st">"No response"</span>, <span class="op">-</span><span class="fl">99L</span>, missing <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="reference/code.html">code</a></span><span class="op">(</span><span class="st">"Refused"</span>, <span class="op">-</span><span class="fl">88L</span>, missing <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="reference/code.html">code</a></span><span class="op">(</span><span class="st">"Absent"</span>, <span class="op">-</span><span class="fl">77L</span>, missing <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">new_coding</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/coding.html">coding</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="reference/code.html">code</a></span><span class="op">(</span><span class="st">"No"</span>, <span class="fl">0L</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="reference/code.html">code</a></span><span class="op">(</span><span class="st">"Yes"</span>, <span class="fl">1L</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="reference/code.html">code</a></span><span class="op">(</span><span class="st">"Missing"</span>, <span class="cn">NA</span>, links_from <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"No response"</span>, <span class="st">"Refused"</span>, <span class="st">"Absent"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">new_coding</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="reference/link_codings.html">link_codings</a></span><span class="op">(</span><span class="va">original_coding</span><span class="op">)</span></span>
<span><span class="co">#&gt;          link label_to value_to     label_1 value_1</span></span>
<span><span class="co">#&gt; 1      Absent  Missing       NA      Absent     -77</span></span>
<span><span class="co">#&gt; 2          No       No        0          No       0</span></span>
<span><span class="co">#&gt; 3 No response  Missing       NA No response     -99</span></span>
<span><span class="co">#&gt; 4     Refused  Missing       NA     Refused     -88</span></span>
<span><span class="co">#&gt; 5         Yes      Yes        1         Yes       1</span></span></code></pre></div>
<p>These linked codings can be converted into a function that accepts a vector and returns a recoded vector.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">new_coding</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="reference/link_codings.html">link_codings</a></span><span class="op">(</span><span class="va">original_coding</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="reference/make_recode_query.html">make_recode_query</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; function (x) </span></span>
<span><span class="co">#&gt; dplyr::case_when(x == -77L ~ NA_integer_, x == 0L ~ 0L, x == </span></span>
<span><span class="co">#&gt;     -99L ~ NA_integer_, x == -88L ~ NA_integer_, x == 1L ~ 1L)</span></span>
<span><span class="co">#&gt; &lt;environment: 0x7fa9e6633478&gt;</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>rcoder is not yet on CRAN, so you will need to install from this repository:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"remotes"</span><span class="op">)</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"nyuglobalties/rcoder"</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://www.r-project.org/Licenses/GPL-3" class="external-link">GPL-3</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing rcoder</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Patrick Anker <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0003-2302-0445" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/nyuglobalties/rcoder/actions" class="external-link"><img src="https://github.com/nyuglobalties/rcoder/workflows/R-CMD-check/badge.svg" alt="R build status"></a></li>
<li><a href="https://www.tidyverse.org/lifecycle/#maturing" class="external-link"><img src="https://img.shields.io/badge/lifecycle-maturing-blue.svg" alt="Lifecycle: maturing"></a></li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p></p>
<p>Developed by Patrick Anker.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
